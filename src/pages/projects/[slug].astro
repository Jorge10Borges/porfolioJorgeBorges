---
import MainLayout from '../../layouts/MainLayout.astro';
import ProjectTemplate from '../../components/ProjectTemplate.astro';

// Tus proyectos desde el data file
import { projects } from '../../data/projects.data';
import ProjectGallery from '../../components/ProjectGallery.astro';

// 1. Define la función getStaticPaths
export async function getStaticPaths() {
  return projects.map(project => ({
    params: { slug: project.slug },
    props: { project }
  }));
}

/* export async function getStaticPaths() {
  return [
    { params: { slug: 'cybermedia' }, props: { name: 'CyberMedia', year: '2000' } },
    { params: { slug: 'lottery95' }, props: { name: 'Lottery 95 / 2000', year: '1995 - 2000' } },
    { params: { slug: 'inventory' }, props: { name: 'Inventory', year: '2000 - 2005' } },
    { params: { slug: 'budget' }, props: { name: 'Budget', year: '2005 - 2010' } },
    { params: { slug: 'asiscont' }, props: { name: 'AsisCont', year: '2010 - 2014' } },
    { params: { slug: 'jbcont' }, props: { name: 'JBCont', year: '2010 - 2014' } },
    { params: { slug: 'jtinventory' }, props: { name: 'JTInventory', year: '2014 - 2016' } },
    { params: { slug: 'tiendalumi' }, props: { name: 'TiendaLumi.com', year: '2022 - 2023' } }
  ];
} */
// 2. Obtiene el proyecto actual del contexto
const { slug } = Astro.params;
const project = projects.find(p => p.slug === slug);

if (!project) {
  throw new Error('Proyecto no encontrado');
}

---

<MainLayout>
  <ProjectTemplate 
    title={project.title}
    description={project.description}
    technologies={project.technologies}
    image={project.image}
    year={project.year}
    technicalDetails={project.technicalDetails}
    contribution={project.contribution}
    featuredChallenges={project.featuredChallenges}
    impact={project.impact}
    url={project.url}
  />

  <!-- Galería de imágenes -->
  {project.imagesGallery && project.imagesGallery.length > 0 && (
    <ProjectGallery images={project.imagesGallery} />
  )}
</MainLayout>
